Marionette.Region=function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof Backbone.$?this.el[0]:this.el,this.el||throwError('An "el" must be specified for a region.',"NoElError"),this.$el=this.getEl(this.el),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},_.extend(Marionette.Region,{buildRegion:function(e,t){var i=_.isString(e),r=_.isString(e.selector),s=_.isUndefined(e.regionClass),o=_.isFunction(e);o||i||r||throwError("Region must be specified as a Region class,a selector string or an object with selector property");var n,h;i&&(n=e),e.selector&&(n=e.selector,delete e.selector),o&&(h=e),!o&&s&&(h=t),e.regionClass&&(h=e.regionClass,delete e.regionClass),(i||o)&&(e={}),e.el=n;var l=new h(e);return e.parentEl&&(l.getEl=function(t){if(_.isObject(t))return Backbone.$(t);var i=e.parentEl;return _.isFunction(i)&&(i=i()),i.find(t)}),l}}),_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(e,t){this._ensureElement();var i=t||{},r=e!==this.currentView,s=!!i.preventDestroy,o=!!i.forceShow,n=!!this.currentView,h=!s&&r;h&&this.empty();var l=r||o;return l?(e.once("destroy",_.bind(this.empty,this)),e.render(),n&&this.triggerMethod("before:swap",e),this.triggerMethod("before:show",e),_.isFunction(e.triggerMethod)?e.triggerMethod("before:show"):this.triggerMethod.call(e,"before:show"),this.attachHtml(e),this.currentView=e,n&&this.triggerMethod("swap",e),this.triggerMethod("show",e),_.isFunction(e.triggerMethod)?e.triggerMethod("show"):this.triggerMethod.call(e,"show"),this):this},_ensureElement:function(){_.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),this.$el&&0!==this.$el.length||throwError('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(e){return Backbone.$(e)},attachHtml:function(e){this.el.innerHTML="",this.el.appendChild(e.el)},empty:function(){var e=this.currentView;e&&(this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView)},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&e.remove()},attachView:function(e){this.currentView=e},reset:function(){this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el},getOption:Marionette.proxyGetOption,triggerMethod:Marionette.triggerMethod}),Marionette.Region.extend=Marionette.extend;