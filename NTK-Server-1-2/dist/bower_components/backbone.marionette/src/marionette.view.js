Marionette.View=Backbone.View.extend({constructor:function(t){_.bindAll(this,"render"),this.options=_.extend({},_.result(this,"options"),_.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(_.result(this,"events")),_.isObject(this.behaviors)&&new Marionette.Behaviors(this),Backbone.View.apply(this,arguments),Marionette.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");return _.isFunction(e)&&(e=e.call(this)),_.extend(t,e)},normalizeUIKeys:function(t){var e=_.result(this,"ui"),i=_.result(this,"_uiBindings");return Marionette.normalizeUIKeys(t,i||e)},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(_.result(this,"triggers"));return _.each(e,function(e,i){var n=_.isObject(e),s=n?e.event:e;t[i]=function(t){if(t){var i=t.preventDefault,o=t.stopPropagation,r=n?e.preventDefault:i,h=n?e.stopPropagation:o;r&&i&&i.apply(t),h&&o&&o.apply(t)}var a={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,a)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,_.isFunction(t)&&(t=t.call(this)),t=this.normalizeUIKeys(t);var e={},i=_.result(this,"behaviorEvents")||{},n=this.configureTriggers();_.extend(e,i,t,n),Backbone.View.prototype.delegateEvents.call(this,e)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);Backbone.View.prototype.undelegateEvents.apply(this,t),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"))},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var t=new Error("Cannot use a view thats already been destroyed.");throw t.name="ViewDestroyedError",t}},destroy:function(){if(!this.isDestroyed){var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.unbindUIElements(),this.remove()}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=_.result(this,"_uiBindings");this.ui={},_.each(_.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(_.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:Marionette.triggerMethod,normalizeMethods:Marionette.normalizeMethods,getOption:Marionette.proxyGetOption,bindEntityEvents:Marionette.proxyBindEntityEvents,unbindEntityEvents:Marionette.proxyUnbindEntityEvents});