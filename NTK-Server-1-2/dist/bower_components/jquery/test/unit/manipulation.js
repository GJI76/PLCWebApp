module("manipulation",{teardown:moduleTeardown}),Array.prototype.arrayProtoFn=function(){throw"arrayProtoFn should not be called"};var manipulationBareObj=function(e){return e},manipulationFunctionReturningObj=function(e){return function(){return e}};test("text()",function(){expect(5);var e,t,n;e='This link has class="blog": Simon Willison\'s Weblog',equal(jQuery("#sap").text(),e,"Check for merged text of more then one element."),equal(jQuery(document.createTextNode("foo")).text(),"foo","Text node was retreived from .text()."),notEqual(jQuery(document).text(),"","Retrieving text for the document retrieves all text (#10724)."),t=document.createDocumentFragment(),t.appendChild(document.createTextNode("foo")),equal(jQuery(t).text(),"foo","Document Fragment Text node was retreived from .text()."),n=jQuery("<div>test<br/>testy</div>").appendTo("#moretests"),n.find("br").replaceWith("\n"),equal(n.text(),"test\ntesty","text() does not remove new lines (#11153)"),n.remove()}),test("text(undefined)",function(){expect(1),equal(jQuery("#foo").text("<div").text(void 0)[0].innerHTML,"&lt;div",".text(undefined) is chainable (#5571)")});var testText=function(e){expect(4);var t,n;t=e("<div><b>Hello</b> cruel world!</div>"),equal(jQuery("#foo").text(t)[0].innerHTML.replace(/>/g,"&gt;"),"&lt;div&gt;&lt;b&gt;Hello&lt;/b&gt; cruel world!&lt;/div&gt;","Check escaped text"),n=jQuery("#nonnodes").contents(),n.text(e("hi!")),equal(jQuery(n[0]).text(),"hi!","Check node,textnode,comment with text()"),equal(n[1].nodeValue," there ","Check node,textnode,comment with text()"),equal(jQuery("#nonnodes")[0].childNodes.length<3?8:n[2].nodeType,8,"Check node,textnode,comment with text()")};test("text(String)",function(){testText(manipulationBareObj)}),test("text(Function)",function(){testText(manipulationFunctionReturningObj)}),test("text(Function) with incoming value",function(){expect(2);var e='This link has class="blog": Simon Willison\'s Weblog';jQuery("#sap").text(function(t,n){return equal(n,e,"Make sure the incoming value is correct."),"foobar"}),equal(jQuery("#sap").text(),"foobar","Check for merged text of more then one element.")});var testWrap=function(e){expect(19);var t,n,r,o,a;t="Try them out:",n=jQuery("#first").wrap(e("<div class='red'><span></span></div>")).text(),equal(t,n,"Check for wrapping of on-the-fly html"),ok(jQuery("#first").parent().parent().is(".red"),"Check if wrapper has class 'red'"),QUnit.reset(),n=jQuery("#first").wrap(e(document.getElementById("empty"))).parent(),ok(n.is("ol"),"Check for element wrapping"),equal(n.text(),t,"Check for element wrapping"),QUnit.reset(),jQuery("#check1").on("click",function(){var t=this;ok(t.checked,"Checkbox's state is erased after wrap() action, see #769"),jQuery(t).wrap(e("<div id='c1' style='display:none;'></div>")),ok(t.checked,"Checkbox's state is erased after wrap() action, see #769")}).prop("checked",!1)[0].click(),r=jQuery("#nonnodes").contents(),r.wrap(e("<i></i>")),equal(jQuery("#nonnodes > i").length,jQuery("#nonnodes")[0].childNodes.length,"Check node,textnode,comment wraps ok"),equal(jQuery("#nonnodes > i").text(),r.text(),"Check node,textnode,comment wraps doesn't hurt text"),a=0;for(o in jQuery.cache)a++;r=jQuery("<label/>").wrap(e("<li/>")),equal(r[0].nodeName.toUpperCase(),"LABEL","Element is a label"),equal(r[0].parentNode.nodeName.toUpperCase(),"LI","Element has been wrapped");for(o in jQuery.cache)a--;equal(a,0,"No memory leak in jQuery.cache (bug #7165)"),r=jQuery("<span/>").wrap("<div>test</div>"),equal(r[0].previousSibling.nodeType,3,"Make sure the previous node is a text element"),equal(r[0].parentNode.nodeName.toUpperCase(),"DIV","And that we're in the div element."),r=jQuery("<div><span></span></div>").children().wrap("<p></p><div></div>"),equal(r[0].parentNode.parentNode.childNodes.length,1,"There should only be one element wrapping."),equal(r.length,1,"There should only be one element (no cloning)."),equal(r[0].parentNode.nodeName.toUpperCase(),"P","The span should be in the paragraph."),r=jQuery("<span/>").wrap(jQuery("<div></div>")),equal(r[0].parentNode.nodeName.toLowerCase(),"div","Wrapping works."),n=jQuery("<div></div>").on("click",function(){ok(!0,"Event triggered."),n.unbind(),jQuery(this).unbind()}),r=jQuery("<span/>").wrap(n),equal(r[0].parentNode.nodeName.toLowerCase(),"div","Wrapping works."),r.parent().trigger("click"),QUnit.reset()};test("wrap(String|Element)",function(){testWrap(manipulationBareObj)}),test("wrap(Function)",function(){testWrap(manipulationFunctionReturningObj)}),test("wrap(Function) with index (#10177)",function(){var e=0,t=jQuery("#qunit-fixture p");expect(t.length),t.wrap(function(t){return equal(t,e,"Check if the provided index ("+t+") is as expected ("+e+")"),e++,"<div id='wrap_index_'"+t+"'></div>"})}),test("wrap(String) consecutive elements (#10177)",function(){var e=jQuery("#qunit-fixture p");expect(2*e.length),e.wrap("<div class='wrapper'></div>"),e.each(function(){var e=jQuery(this);ok(e.parent().is(".wrapper"),"Check each elements parent is correct (.wrapper)"),equal(e.siblings().length,0,"Each element should be wrapped individually")})});var testWrapAll=function(e){expect(8);var t,n,r;t=jQuery("#firstp")[0].previousSibling,n=jQuery("#firstp,#first")[0].parentNode,r=jQuery("#firstp,#first").wrapAll(e("<div class='red'><div class='tmp'></div></div>")),equal(r.parent().length,1,"Check for wrapping of on-the-fly html"),ok(jQuery("#first").parent().parent().is(".red"),"Check if wrapper has class 'red'"),ok(jQuery("#firstp").parent().parent().is(".red"),"Check if wrapper has class 'red'"),equal(jQuery("#first").parent().parent()[0].previousSibling,t,"Correct Previous Sibling"),equal(jQuery("#first").parent().parent()[0].parentNode,n,"Correct Parent"),QUnit.reset(),t=jQuery("#firstp")[0].previousSibling,n=jQuery("#first")[0].parentNode,r=jQuery("#firstp,#first").wrapAll(e(document.getElementById("empty"))),equal(jQuery("#first").parent()[0],jQuery("#firstp").parent()[0],"Same Parent"),equal(jQuery("#first").parent()[0].previousSibling,t,"Correct Previous Sibling"),equal(jQuery("#first").parent()[0].parentNode,n,"Correct Parent")};test("wrapAll(String|Element)",function(){testWrapAll(manipulationBareObj)});var testWrapInner=function(e){expect(11);var t,n;t=jQuery("#first").children().length,n=jQuery("#first").wrapInner(e("<div class='red'><div id='tmp'></div></div>")),equal(jQuery("#first").children().length,1,"Only one child"),ok(jQuery("#first").children().is(".red"),"Verify Right Element"),equal(jQuery("#first").children().children().children().length,t,"Verify Elements Intact"),QUnit.reset(),t=jQuery("#first").html("foo<div>test</div><div>test2</div>").children().length,n=jQuery("#first").wrapInner(e("<div class='red'><div id='tmp'></div></div>")),equal(jQuery("#first").children().length,1,"Only one child"),ok(jQuery("#first").children().is(".red"),"Verify Right Element"),equal(jQuery("#first").children().children().children().length,t,"Verify Elements Intact"),QUnit.reset(),t=jQuery("#first").children().length,n=jQuery("#first").wrapInner(e(document.getElementById("empty"))),equal(jQuery("#first").children().length,1,"Only one child"),ok(jQuery("#first").children().is("#empty"),"Verify Right Element"),equal(jQuery("#first").children().children().length,t,"Verify Elements Intact");var r=jQuery("<div/>");r.wrapInner(e("<span></span>")),equal(r.children().length,1,"The contents were wrapped."),equal(r.children()[0].nodeName.toLowerCase(),"span","A span was inserted.")};test("wrapInner(String|Element)",function(){testWrapInner(manipulationBareObj)}),test("wrapInner(Function)",function(){testWrapInner(manipulationFunctionReturningObj)}),test("unwrap()",function(){expect(9),jQuery("body").append("  <div id='unwrap' style='display: none;'> <div id='unwrap1'> <span class='unwrap'>a</span> <span class='unwrap'>b</span> </div> <div id='unwrap2'> <span class='unwrap'>c</span> <span class='unwrap'>d</span> </div> <div id='unwrap3'> <b><span class='unwrap unwrap3'>e</span></b> <b><span class='unwrap unwrap3'>f</span></b> </div> </div>");var e=jQuery("#unwrap1 > span, #unwrap2 > span").get(),t=jQuery("#unwrap span").get();equal(jQuery("#unwrap1 span").add("#unwrap2 span:first").unwrap().length,3,"make #unwrap1 and #unwrap2 go away"),deepEqual(jQuery("#unwrap > span").get(),e,"all four spans should still exist"),deepEqual(jQuery("#unwrap3 span").unwrap().get(),jQuery("#unwrap3 > span").get(),"make all b in #unwrap3 go away"),deepEqual(jQuery("#unwrap3 span").unwrap().get(),jQuery("#unwrap > span.unwrap3").get(),"make #unwrap3 go away"),deepEqual(jQuery("#unwrap").children().get(),t,"#unwrap only contains 6 child spans"),deepEqual(jQuery("#unwrap > span").unwrap().get(),jQuery("body > span.unwrap").get(),"make the 6 spans become children of body"),deepEqual(jQuery("body > span.unwrap").unwrap().get(),jQuery("body > span.unwrap").get(),"can't unwrap children of body"),deepEqual(jQuery("body > span.unwrap").unwrap().get(),t,"can't unwrap children of body"),deepEqual(jQuery("body > span.unwrap").get(),t,"body contains 6 .unwrap child spans"),jQuery("body > span.unwrap").remove()});var testAppendForObject=function(e,t){var n,r=t?" (DocumentFragment)":" (Element)",o='This link has class="blog": Simon Willison\'s Weblog',a=document.getElementById("sap").cloneNode(!0),i=document.getElementById("first"),l=document.getElementById("yahoo");t?(n=document.createDocumentFragment(),jQuery(a).contents().each(function(){n.appendChild(this)}),n=jQuery(n)):n=jQuery(a),equal(n.clone().append(e(i.cloneNode(!0))).text(),o+"Try them out:","Check for appending of element"+r),equal(n.clone().append(e([i.cloneNode(!0),l.cloneNode(!0)])).text(),o+"Try them out:Yahoo","Check for appending of array of elements"+r),equal(n.clone().append(e(jQuery("#yahoo, #first").clone())).text(),o+"YahooTry them out:","Check for appending of jQuery object"+r),equal(n.clone().append(e(5)).text(),o+"5","Check for appending a number"+r),equal(n.clone().append(e([jQuery("#first").clone(),jQuery("#yahoo, #google").clone()])).text(),o+"Try them out:GoogleYahoo","Check for appending of array of jQuery objects"),equal(n.clone().append(e(" text with spaces ")).text(),o+" text with spaces ","Check for appending text with spaces"+r),equal(n.clone().append(e([])).text(),o,"Check for appending an empty array"+r),equal(n.clone().append(e("")).text(),o,"Check for appending an empty string"+r),equal(n.clone().append(e(document.getElementsByTagName("foo"))).text(),o,"Check for appending an empty nodelist"+r),equal(n.clone().append("<span></span>","<span></span>","<span></span>").children().length,n.children().length+3,"Make sure that multiple arguments works."+r),equal(n.clone().append(e(document.getElementById("form").cloneNode(!0))).children("form").length,1,"Check for appending a form (#910)"+r)},testAppend=function(e){expect(78),testAppendForObject(e,!1),testAppendForObject(e,!0);var n,r,o,a,i,l,s,u,c,p,d,h,m;n="Try them out:",r=jQuery("#first").append(e("<b>buga</b>")),equal(r.text(),n+"buga","Check if text appending works"),equal(jQuery("#select3").append(e("<option value='appendTest'>Append Test</option>")).find("option:last-child").attr("value"),"appendTest","Appending html options to select element"),jQuery("form").append(e("<input name='radiotest' type='radio' checked='checked' />")),jQuery("form input[name=radiotest]").each(function(){ok(jQuery(this).is(":checked"),"Append checked radio")}).remove(),jQuery("form").append(e("<input name='radiotest2' type='radio' checked    =   'checked' />")),jQuery("form input[name=radiotest2]").each(function(){ok(jQuery(this).is(":checked"),"Append alternately formated checked radio")}).remove(),jQuery("form").append(e("<input name='radiotest3' type='radio' checked />")),jQuery("form input[name=radiotest3]").each(function(){ok(jQuery(this).is(":checked"),"Append HTML5-formated checked radio")}).remove(),jQuery("form").append(e("<input type='radio' checked='checked' name='radiotest4' />")),jQuery("form input[name=radiotest4]").each(function(){ok(jQuery(this).is(":checked"),"Append with name attribute after checked attribute")}).remove(),o="Test for appending a DOM node to the contents of an iframe",a=jQuery("#iframe")[0],i=a.contentDocument||a.contentWindow&&a.contentWindow.document;try{i&&i.body?equal(jQuery(i.body).append(e("<div id='success'>test</div>"))[0].lastChild.id,"success",o):ok(!0,o+" - can't test")}catch(y){strictEqual(y.message||y,void 0,o)}jQuery("<fieldset/>").appendTo("#form").append(e("<legend id='legend'>test</legend>")),t("Append legend","#legend",["legend"]),h=jQuery("<map/>").append(e("<area id='map01' shape='rect' coords='50,50,150,150' href='http://www.jquery.com/' alt='jQuery'>")),equal(h[0].childNodes.length,1,"The area was inserted."),equal(h[0].firstChild.nodeName.toLowerCase(),"area","The area was inserted."),jQuery("#select1").append(e("<OPTION>Test</OPTION>")),equal(jQuery("#select1 option:last").text(),"Test","Appending OPTION (all caps)"),jQuery("#select1").append(e("<optgroup label='optgroup'><option>optgroup</option></optgroup>")),equal(jQuery("#select1 optgroup").attr("label"),"optgroup","Label attribute in newly inserted optgroup is correct"),equal(jQuery("#select1 option:last").text(),"optgroup","Appending optgroup"),m=jQuery("#table").empty(),jQuery.each("thead tbody tfoot colgroup caption tr th td".split(" "),function(t,n){m.append(e("<"+n+"/>")),ok(m.find(n).length>=1,"Append "+n),ok(jQuery.parseHTML("<"+n+"/>").length,n+" wrapped correctly")}),jQuery("#table colgroup").append(e("<col/>")),equal(jQuery("#table colgroup col").length,1,"Append col"),jQuery("#form").append(e("<select id='appendSelect1'></select>")).append(e("<select id='appendSelect2'><option>Test</option></select>")),t("Append Select","#appendSelect1, #appendSelect2",["appendSelect1","appendSelect2"]),equal("Two nodes",jQuery("<div />").append("Two"," nodes").text(),"Appending two text nodes (#4011)"),equal(jQuery("<div />").append("1","",3).text(),"13","If median is false-like value, subsequent arguments should not be ignored"),l=jQuery("#nonnodes").contents(),s=jQuery("<div/>").appendTo("#nonnodes").append(l),equal(jQuery("#nonnodes").length,1,"Check node,textnode,comment append moved leaving just the div"),equal(s.contents().length,3,"Check node,textnode,comment append works"),s.contents().appendTo("#nonnodes"),s.remove(),equal(jQuery("#nonnodes").contents().length,3,"Check node,textnode,comment append cleanup worked"),u=jQuery("<input type='checkbox'/>").prop("checked",!0).appendTo("#testForm"),equal(u[0].checked,!0,"A checked checkbox that is appended stays checked"),c=jQuery("input:radio[name='R1']").eq(1),d=c.parent(),p=jQuery("<input type='radio' name='R1' checked='checked'/>").appendTo(d),c.trigger("click"),p[0].checked=!1,d.wrap("<div></div>"),equal(c[0].checked,!0,"Reappending radios uphold which radio is checked"),equal(p[0].checked,!1,"Reappending radios uphold not being checked"),equal(jQuery("<div/>").append(e("option<area/>"))[0].childNodes.length,2,"HTML-string with leading text should be processed correctly")};test("append(String|Element|Array<Element>|jQuery)",function(){testAppend(manipulationBareObj)}),test("append(Function)",function(){testAppend(manipulationFunctionReturningObj)}),test("append(param) to object, see #11280",function(){expect(5);var e=jQuery(document.createElement("object")).appendTo(document.body);equal(e.children().length,0,"object does not start with children"),e.append(jQuery("<param type='wmode' name='foo'>")),equal(e.children().length,1,"appended param"),equal(e.children().eq(0).attr("name"),"foo","param has name=foo"),e=jQuery("<object><param type='baz' name='bar'></object>"),equal(e.children().length,1,"object created with child param"),equal(e.children().eq(0).attr("name"),"bar","param has name=bar")}),test("append(Function) with incoming value",function(){expect(12);var e,t,n,r,o;e="Try them out:",r=jQuery("#first").html(),t=jQuery("#first").append(function(e,t){return equal(t,r,"Make sure the incoming value is correct."),"<b>buga</b>"}),equal(t.text(),e+"buga","Check if text appending works"),n=jQuery("#select3"),r=n.html(),equal(n.append(function(e,t){return equal(t,r,"Make sure the incoming value is correct."),"<option value='appendTest'>Append Test</option>"}).find("option:last-child").attr("value"),"appendTest","Appending html options to select element"),QUnit.reset(),o='This link has class="blog": Simon Willison\'s WeblogTry them out:',r=jQuery("#sap").html(),jQuery("#sap").append(function(e,t){return equal(t,r,"Make sure the incoming value is correct."),document.getElementById("first")}),equal(jQuery("#sap").text(),o,"Check for appending of element"),QUnit.reset(),o='This link has class="blog": Simon Willison\'s WeblogTry them out:Yahoo',r=jQuery("#sap").html(),jQuery("#sap").append(function(e,t){return equal(t,r,"Make sure the incoming value is correct."),[document.getElementById("first"),document.getElementById("yahoo")]}),equal(jQuery("#sap").text(),o,"Check for appending of array of elements"),QUnit.reset(),o='This link has class="blog": Simon Willison\'s WeblogYahooTry them out:',r=jQuery("#sap").html(),jQuery("#sap").append(function(e,t){return equal(t,r,"Make sure the incoming value is correct."),jQuery("#yahoo, #first")}),equal(jQuery("#sap").text(),o,"Check for appending of jQuery object"),QUnit.reset(),r=jQuery("#sap").html(),jQuery("#sap").append(function(e,t){return equal(t,r,"Make sure the incoming value is correct."),5}),ok(jQuery("#sap")[0].innerHTML.match(/5$/),"Check for appending a number"),QUnit.reset()}),test("replaceWith on XML document (#9960)",function(){expect(1);var e,t=jQuery.parseXML("<scxml xmlns='http://www.w3.org/2005/07/scxml' version='1.0'><state x='100' y='100' initial='actions' id='provisioning'></state><state x='100' y='100' id='error'></state><state x='100' y='100' id='finished' final='true'></state></scxml>"),n=jQuery.parseXML("<scxml xmlns='http://www.w3.org/2005/07/scxml' version='1.0'><state id='provisioning3'></state></scxml>"),r=jQuery(t),o=jQuery(n),a=jQuery(":first",r),i=jQuery(":first",o);a.replaceWith(i),e=jQuery(":first>state[id='provisioning3']",r),equal(e.length,1,"ReplaceWith not working on document nodes.")}),test("replaceWith([]) where replacing element requires cloning",function(){expect(2),jQuery("#qunit-fixture").append("<div class='replaceable'></div><div class='replaceable'></div>"),jQuery("#qunit-fixture .replaceable").replaceWith(jQuery("<span class='replaced'></span><span class='replaced'></span>")),equal(jQuery("#qunit-fixture").find(".replaceable").length,0,"Make sure replaced elements were removed"),equal(jQuery("#qunit-fixture").find(".replaced").length,4,"Make sure replacing elements were cloned")}),test("append the same fragment with events (Bug #6997, 5566)",function(){var e,t,n=!jQuery.support.noCloneEvent&&document.fireEvent;expect(2+(n?1:0)),stop(),n&&(e=jQuery("div:first").on("click",function(){ok(!0,"Event exists on original after being unbound on clone"),jQuery(this).unbind("click")}),t=e.clone(!0).unbind("click"),t[0].fireEvent("onclick"),e[0].fireEvent("onclick"),t.remove()),e=jQuery("<a class='test6997'></a>").on("click",function(){ok(!0,"Append second element events work")}),jQuery("#listWithTabIndex li").append(e).find("a.test6997").eq(1).trigger("click"),e=jQuery("<li class='test6997'></li>").on("click",function(){ok(!0,"Before second element events work"),start()}),jQuery("#listWithTabIndex li").before(e),jQuery("#listWithTabIndex li.test6997").eq(1).trigger("click")}),test("append HTML5 sectioning elements (Bug #6485)",function(){expect(2);var e,t;jQuery("#qunit-fixture").append("<article style='font-size:10px'><section><aside>HTML5 elements</aside></section></article>"),e=jQuery("article"),t=jQuery("aside"),equal(e.get(0).style.fontSize,"10px","HTML5 elements are styleable"),equal(t.length,1,"HTML5 elements do not collapse their children")}),jQuery.css&&test("HTML5 Elements inherit styles from style rules (Bug #10501)",function(){expect(1),jQuery("#qunit-fixture").append("<article id='article'></article>"),jQuery("#article").append("<section>This section should have a pink background.</section>"),notEqual(jQuery("section").css("background-color"),"transparent","HTML5 elements inherit styles")}),test("html(String) with HTML5 (Bug #6485)",function(){expect(2),jQuery("#qunit-fixture").html("<article><section><aside>HTML5 elements</aside></section></article>"),equal(jQuery("#qunit-fixture").children().children().length,1,"Make sure HTML5 article elements can hold children. innerHTML shortcut path"),equal(jQuery("#qunit-fixture").children().children().children().length,1,"Make sure nested HTML5 elements can hold children.")}),test("IE8 serialization bug",function(){expect(2);var e=jQuery("<div></div>");e.html("<div></div><article></article>"),equal(e.children("article").length,1,"HTML5 elements are insertable with .html()"),e.html("<div></div><link></link>"),equal(e.children("link").length,1,"Link elements are insertable with .html()")}),test("html() object element #10324",function(){expect(1);var e=jQuery("<object id='object2'><param name='object2test' value='test'></param></object>?").appendTo("#qunit-fixture"),t=e.clone();equal(t.html(),e.html(),"html() returns correct innerhtml of cloned object elements")}),test("append(xml)",function(){function e(){var e,t,n,r=["MSXML6.DomDocument","MSXML3.DomDocument","MSXML2.DomDocument","MSXML.DomDocument","Microsoft.XmlDom"];if(document.implementation&&"createDocument"in document.implementation)return document.implementation.createDocument("","",null);for(t=0,n=r.length;n>t;t++)try{return e=new ActiveXObject(r[t])}catch(o){}}expect(1);var t,n,r;t=e(),n=t.createElement("head"),r=t.createElement("test"),ok(jQuery(n).append(r),"Append an xml element to another without raising an exception.")}),test("appendTo(String|Element|Array<Element>|jQuery)",function(){expect(16);var e,n,r,o,a;e="Try them out:",jQuery("<b>buga</b>").appendTo("#first"),equal(jQuery("#first").text(),e+"buga","Check if text appending works"),equal(jQuery("<option value='appendTest'>Append Test</option>").appendTo("#select3").parent().find("option:last-child").attr("value"),"appendTest","Appending html options to select element"),QUnit.reset(),n=jQuery("#first").children().length+2,jQuery("<strong>test</strong>"),jQuery("<strong>test</strong>"),jQuery([jQuery("<strong>test</strong>")[0],jQuery("<strong>test</strong>")[0]]).appendTo("#first"),equal(jQuery("#first").children().length,n,"Make sure the elements were inserted."),equal(jQuery("#first").children().last()[0].nodeName.toLowerCase(),"strong","Verify the last element."),QUnit.reset(),r='This link has class="blog": Simon Willison\'s WeblogTry them out:',jQuery(document.getElementById("first")).appendTo("#sap"),equal(jQuery("#sap").text(),r,"Check for appending of element"),QUnit.reset(),r='This link has class="blog": Simon Willison\'s WeblogTry them out:Yahoo',jQuery([document.getElementById("first"),document.getElementById("yahoo")]).appendTo("#sap"),equal(jQuery("#sap").text(),r,"Check for appending of array of elements"),QUnit.reset(),ok(jQuery(document.createElement("script")).appendTo("body").length,"Make sure a disconnected script can be appended."),QUnit.reset(),r='This link has class="blog": Simon Willison\'s WeblogYahooTry them out:',jQuery("#yahoo, #first").appendTo("#sap"),equal(jQuery("#sap").text(),r,"Check for appending of jQuery object"),QUnit.reset(),jQuery("#select1").appendTo("#foo"),t("Append select","#foo select",["select1"]),QUnit.reset(),a=jQuery("<div/>").on("click",function(){ok(!0,"Running a cloned click.")}),a.appendTo("#qunit-fixture, #moretests"),jQuery("#qunit-fixture div:last").trigger("click"),jQuery("#moretests div:last").trigger("click"),QUnit.reset(),a=jQuery("<div/>").appendTo("#qunit-fixture, #moretests"),equal(a.length,2,"appendTo returns the inserted elements"),a.addClass("test"),ok(jQuery("#qunit-fixture div:last").hasClass("test"),"appendTo element was modified after the insertion"),ok(jQuery("#moretests div:last").hasClass("test"),"appendTo element was modified after the insertion"),QUnit.reset(),a=jQuery("<div/>"),jQuery("<span>a</span><b>b</b>").filter("span").appendTo(a),equal(a.children().length,1,"Make sure the right number of children were inserted."),a=jQuery("#moretests div"),o=jQuery("#qunit-fixture div").length,a.remove().appendTo("#qunit-fixture"),equal(jQuery("#qunit-fixture div").length,o,"Make sure all the removed divs were inserted.")});var testPrepend=function(e){expect(6);var t,n,r;t="Try them out:",n=jQuery("#first").prepend(e("<b>buga</b>")),equal(n.text(),"buga"+t,"Check if text prepending works"),equal(jQuery("#select3").prepend(e("<option value='prependTest'>Prepend Test</option>")).find("option:first-child").attr("value"),"prependTest","Prepending html options to select element"),QUnit.reset(),r='Try them out:This link has class="blog": Simon Willison\'s Weblog',jQuery("#sap").prepend(e(document.getElementById("first"))),equal(jQuery("#sap").text(),r,"Check for prepending of element"),QUnit.reset(),r='Try them out:YahooThis link has class="blog": Simon Willison\'s Weblog',jQuery("#sap").prepend(e([document.getElementById("first"),document.getElementById("yahoo")])),equal(jQuery("#sap").text(),r,"Check for prepending of array of elements"),QUnit.reset(),r='YahooTry them out:This link has class="blog": Simon Willison\'s Weblog',jQuery("#sap").prepend(e(jQuery("#yahoo, #first"))),equal(jQuery("#sap").text(),r,"Check for prepending of jQuery object"),QUnit.reset(),r='Try them out:GoogleYahooThis link has class="blog": Simon Willison\'s Weblog',jQuery("#sap").prepend(e([jQuery("#first"),jQuery("#yahoo, #google")])),equal(jQuery("#sap").text(),r,"Check for prepending of array of jQuery objects")};test("prepend(String|Element|Array<Element>|jQuery)",function(){testPrepend(manipulationBareObj)}),test("prepend(Function)",function(){testPrepend(manipulationFunctionReturningObj)}),test("prepend(Function) with incoming value",function(){expect(10);var e,t,n,r;e="Try them out:",t=jQuery("#first").html(),n=jQuery("#first").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),"<b>buga</b>"}),equal(n.text(),"buga"+e,"Check if text prepending works"),t=jQuery("#select3").html(),equal(jQuery("#select3").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),"<option value='prependTest'>Prepend Test</option>"}).find("option:first-child").attr("value"),"prependTest","Prepending html options to select element"),QUnit.reset(),r='Try them out:This link has class="blog": Simon Willison\'s Weblog',t=jQuery("#sap").html(),jQuery("#sap").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),document.getElementById("first")}),equal(jQuery("#sap").text(),r,"Check for prepending of element"),QUnit.reset(),r='Try them out:YahooThis link has class="blog": Simon Willison\'s Weblog',t=jQuery("#sap").html(),jQuery("#sap").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),[document.getElementById("first"),document.getElementById("yahoo")]}),equal(jQuery("#sap").text(),r,"Check for prepending of array of elements"),QUnit.reset(),r='YahooTry them out:This link has class="blog": Simon Willison\'s Weblog',t=jQuery("#sap").html(),jQuery("#sap").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),jQuery("#yahoo, #first")}),equal(jQuery("#sap").text(),r,"Check for prepending of jQuery object")}),test("prependTo(String|Element|Array<Element>|jQuery)",function(){expect(6);var e,n;e="Try them out:",jQuery("<b>buga</b>").prependTo("#first"),equal(jQuery("#first").text(),"buga"+e,"Check if text prepending works"),equal(jQuery("<option value='prependTest'>Prepend Test</option>").prependTo("#select3").parent().find("option:first-child").attr("value"),"prependTest","Prepending html options to select element"),QUnit.reset(),n='Try them out:This link has class="blog": Simon Willison\'s Weblog',jQuery(document.getElementById("first")).prependTo("#sap"),equal(jQuery("#sap").text(),n,"Check for prepending of element"),QUnit.reset(),n='Try them out:YahooThis link has class="blog": Simon Willison\'s Weblog',jQuery([document.getElementById("first"),document.getElementById("yahoo")]).prependTo("#sap"),equal(jQuery("#sap").text(),n,"Check for prepending of array of elements"),QUnit.reset(),n='YahooTry them out:This link has class="blog": Simon Willison\'s Weblog',jQuery("#yahoo, #first").prependTo("#sap"),equal(jQuery("#sap").text(),n,"Check for prepending of jQuery object"),QUnit.reset(),jQuery("<select id='prependSelect1'></select>").prependTo("form:last"),jQuery("<select id='prependSelect2'><option>Test</option></select>").prependTo("form:last"),t("Prepend Select","#prependSelect2, #prependSelect1",["prependSelect2","prependSelect1"])});var testBefore=function(e){expect(7);var t,n;t="This is a normal link: bugaYahoo",jQuery("#yahoo").before(e("<b>buga</b>")),equal(jQuery("#en").text(),t,"Insert String before"),QUnit.reset(),t="This is a normal link: Try them out:Yahoo",jQuery("#yahoo").before(e(document.getElementById("first"))),equal(jQuery("#en").text(),t,"Insert element before"),QUnit.reset(),t="This is a normal link: Try them out:diveintomarkYahoo",jQuery("#yahoo").before(e([document.getElementById("first"),document.getElementById("mark")])),equal(jQuery("#en").text(),t,"Insert array of elements before"),QUnit.reset(),t="This is a normal link: diveintomarkTry them out:Yahoo",jQuery("#yahoo").before(e(jQuery("#mark, #first"))),equal(jQuery("#en").text(),t,"Insert jQuery before"),QUnit.reset(),t="This is a normal link: Try them out:GooglediveintomarkYahoo",jQuery("#yahoo").before(e([jQuery("#first"),jQuery("#mark, #google")])),equal(jQuery("#en").text(),t,"Insert array of jQuery objects before"),n=jQuery("<div/>").before("<span>test</span>"),equal(n[0].nodeName.toLowerCase(),"div","Insert before a disconnected node should be a no-op"),equal(n.length,1,"Insert the element before the disconnected node. should be a no-op")};test("before(String|Element|Array<Element>|jQuery)",function(){testBefore(manipulationBareObj)}),test("before(Function)",function(){testBefore(manipulationFunctionReturningObj)}),test("before and after w/ empty object (#10812)",function(){expect(1);var e;e=jQuery("#notInTheDocument").before("(").after(")"),equal(e.length,0,"didn't choke on empty object")}),test("before and after on disconnected node (#10517)",function(){expect(6);var e="This is a normal link: bugaYahoo",t="This is a normal link: Yahoobuga";equal(jQuery("<input type='checkbox'/>").before("<div/>").length,1,"before() on disconnected node is no-op"),equal(jQuery("<input type='checkbox'/>").after("<div/>").length,1,"after() on disconnected node is no-op"),QUnit.reset(),jQuery("#yahoo").add("<span/>").before("<b>buga</b>"),equal(jQuery("#en").text(),e,"Insert String before with disconnected node last"),QUnit.reset(),jQuery("<span/>").add("#yahoo").before("<b>buga</b>"),equal(jQuery("#en").text(),e,"Insert String before with disconnected node first"),QUnit.reset(),jQuery("#yahoo").add("<span/>").after("<b>buga</b>"),equal(jQuery("#en").text(),t,"Insert String after with disconnected node last"),QUnit.reset(),jQuery("<span/>").add("#yahoo").after("<b>buga</b>"),equal(jQuery("#en").text(),t,"Insert String after with disconnected node first")}),test("insertBefore(String|Element|Array<Element>|jQuery)",function(){expect(4);var e;e="This is a normal link: bugaYahoo",jQuery("<b>buga</b>").insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert String before"),QUnit.reset(),e="This is a normal link: Try them out:Yahoo",jQuery(document.getElementById("first")).insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert element before"),QUnit.reset(),e="This is a normal link: Try them out:diveintomarkYahoo",jQuery([document.getElementById("first"),document.getElementById("mark")]).insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert array of elements before"),QUnit.reset(),e="This is a normal link: diveintomarkTry them out:Yahoo",jQuery("#mark, #first").insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert jQuery before")
});var testAfter=function(e){expect(7);var t,n;n="This is a normal link: Yahoobuga",jQuery("#yahoo").after(e("<b>buga</b>")),equal(jQuery("#en").text(),n,"Insert String after"),QUnit.reset(),n="This is a normal link: YahooTry them out:",jQuery("#yahoo").after(e(document.getElementById("first"))),equal(jQuery("#en").text(),n,"Insert element after"),QUnit.reset(),n="This is a normal link: YahooTry them out:diveintomark",jQuery("#yahoo").after(e([document.getElementById("first"),document.getElementById("mark")])),equal(jQuery("#en").text(),n,"Insert array of elements after"),QUnit.reset(),n="This is a normal link: YahoodiveintomarkTry them out:",jQuery("#yahoo").after(e(jQuery("#mark, #first"))),equal(jQuery("#en").text(),n,"Insert jQuery after"),QUnit.reset(),n="This is a normal link: YahooTry them out:Googlediveintomark",jQuery("#yahoo").after(e([jQuery("#first"),jQuery("#mark, #google")])),equal(jQuery("#en").text(),n,"Insert array of jQuery objects after"),t=jQuery("<div/>").before("<span>test</span>"),equal(t[0].nodeName.toLowerCase(),"div","Insert after a disconnected node should be a no-op"),equal(t.length,1,"Insert the element after the disconnected node should be a no-op")};test("after(String|Element|Array<Element>|jQuery)",function(){testAfter(manipulationBareObj)}),test("after(Function)",function(){testAfter(manipulationFunctionReturningObj)}),test("insertAfter(String|Element|Array<Element>|jQuery)",function(){expect(4);var e;e="This is a normal link: Yahoobuga",jQuery("<b>buga</b>").insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert String after"),QUnit.reset(),e="This is a normal link: YahooTry them out:",jQuery(document.getElementById("first")).insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert element after"),QUnit.reset(),e="This is a normal link: YahooTry them out:diveintomark",jQuery([document.getElementById("first"),document.getElementById("mark")]).insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert array of elements after"),QUnit.reset(),e="This is a normal link: YahoodiveintomarkTry them out:",jQuery("#mark, #first").insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert jQuery after")});var testReplaceWith=function(e){var t,n,r,o,a,i,l,s=23;return expect(s),jQuery("#yahoo").replaceWith(e("<b id='replace'>buga</b>")),ok(jQuery("#replace")[0],"Replace element with element from string"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after string"),jQuery("#anchor2").replaceWith(e(document.getElementById("first"))),ok(jQuery("#first")[0],"Replace element with element"),ok(!jQuery("#anchor2")[0],"Verify that original element is gone, after element"),jQuery("#qunit-fixture").append("<div id='bar'><div id='baz'></div></div>"),jQuery("#baz").replaceWith(e("Baz")),equal(jQuery("#bar").text(),"Baz","Replace element with text"),ok(!jQuery("#baz")[0],"Verify that original element is gone, after element"),jQuery("#google").replaceWith(e([document.getElementById("first"),document.getElementById("mark")])),ok(jQuery("#first")[0],"Replace element with array of elements"),ok(jQuery("#mark")[0],"Replace element with array of elements"),ok(!jQuery("#google")[0],"Verify that original element is gone, after array of elements"),jQuery("#groups").replaceWith(e(jQuery("#mark, #first"))),ok(jQuery("#first")[0],"Replace element with set of elements"),ok(jQuery("#mark")[0],"Replace element with set of elements"),ok(!jQuery("#groups")[0],"Verify that original element is gone, after set of elements"),t=jQuery("<b>content</b>")[0],jQuery("#anchor1").contents().replaceWith(e(t)),deepEqual(jQuery("#anchor1").contents().get(),[t],"Replace text node with element"),t=jQuery("<div/>").appendTo("#qunit-fixture").on("click",function(){ok(!0,"Newly bound click run.")}),n=jQuery("<div/>").appendTo("#qunit-fixture").on("click",function(){ok(!1,"Previously bound click run.")}),r=n.append("<b>test</b>").find("b").on("click",function(){return ok(!0,"Child bound click run."),!1}),n.replaceWith(e(t)),t.trigger("click"),n.trigger("click"),r.trigger("click"),n=jQuery("<div/>").appendTo("#qunit-fixture").on("click",function(){ok(!1,"Previously bound click run.")}),o=n.append("<u>test</u>").find("u").on("click",function(){return ok(!0,"Child 2 bound click run."),!1}),n.replaceWith(e(o)),o.trigger("click"),a=jQuery("<div/>").replaceWith(e("<span>test</span>")),equal(a[0].nodeName.toLowerCase(),"div","No effect on a disconnected node."),equal(a.length,1,"No effect on a disconnected node."),equal(a[0].childNodes.length,0,"No effect on a disconnected node."),i=jQuery("#does-not-exist").replaceWith(e("<b>should not throw an error</b>")),equal(i.length,0,"Length of non existent element."),l=jQuery("<div class='replacewith'></div>").appendTo("#qunit-fixture"),l.replaceWith(e("<div class='replacewith'></div><script>equal( jQuery('.replacewith').length, 1, 'Check number of elements in page.' );</script>")),jQuery("#qunit-fixture").append("<div id='replaceWith'></div>"),equal(jQuery("#qunit-fixture").find("div[id=replaceWith]").length,1,"Make sure only one div exists."),jQuery("#replaceWith").replaceWith(e("<div id='replaceWith'></div>")),equal(jQuery("#qunit-fixture").find("div[id=replaceWith]").length,1,"Make sure only one div exists after replacement."),jQuery("#replaceWith").replaceWith(e("<div id='replaceWith'></div>")),equal(jQuery("#qunit-fixture").find("div[id=replaceWith]").length,1,"Make sure only one div exists after subsequent replacement."),s};test("replaceWith(String|Element|Array<Element>|jQuery)",function(){testReplaceWith(manipulationBareObj)}),test("replaceWith(Function)",function(){expect(testReplaceWith(manipulationFunctionReturningObj)+1);var e=jQuery("#foo")[0];jQuery(e).replaceWith(function(){equal(this,e,"Make sure the context is coming in correctly.")})}),test("replaceWith(string) for more than one element",function(){expect(3),equal(jQuery("#foo p").length,3,"ensuring that test data has not changed"),jQuery("#foo p").replaceWith("<span>bar</span>"),equal(jQuery("#foo span").length,3,"verify that all the three original element have been replaced"),equal(jQuery("#foo p").length,0,"verify that all the three original element have been replaced")}),test("replaceAll(String|Element|Array<Element>|jQuery)",function(){expect(10),jQuery("<b id='replace'>buga</b>").replaceAll("#yahoo"),ok(jQuery("#replace")[0],"Replace element with string"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after string"),QUnit.reset(),jQuery(document.getElementById("first")).replaceAll("#yahoo"),ok(jQuery("#first")[0],"Replace element with element"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after element"),QUnit.reset(),jQuery([document.getElementById("first"),document.getElementById("mark")]).replaceAll("#yahoo"),ok(jQuery("#first")[0],"Replace element with array of elements"),ok(jQuery("#mark")[0],"Replace element with array of elements"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after array of elements"),QUnit.reset(),jQuery("#mark, #first").replaceAll("#yahoo"),ok(jQuery("#first")[0],"Replace element with set of elements"),ok(jQuery("#mark")[0],"Replace element with set of elements"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after set of elements")}),test("jQuery.clone() (#8017)",function(){expect(2),ok(jQuery.clone&&jQuery.isFunction(jQuery.clone),"jQuery.clone() utility exists and is a function.");var e=jQuery("#qunit-fixture")[0],t=jQuery.clone(e);equal(e.childNodes.length,t.childNodes.length,"Simple child length to ensure a large dom tree copies correctly")}),test("append to multiple elements (#8070)",function(){expect(2);var e=jQuery("<select class='test8070'></select><select class='test8070'></select>").appendTo("#qunit-fixture");e.append("<OPTION>1</OPTION><OPTION>2</OPTION>"),equal(e[0].childNodes.length,2,"First select got two nodes"),equal(e[1].childNodes.length,2,"Second select got two nodes")}),test("clone()",function(){expect(45);var e,t,n,r;equal(jQuery("#en").text(),"This is a normal link: Yahoo","Assert text for #en"),equal(jQuery("#first").append(jQuery("#yahoo").clone()).text(),"Try them out:Yahoo","Check for clone"),equal(jQuery("#en").text(),"This is a normal link: Yahoo","Reassert text for #en"),jQuery.each("table thead tbody tfoot tr td div button ul ol li select option textarea iframe".split(" "),function(e,t){equal(jQuery("<"+t+"/>").clone()[0].nodeName.toLowerCase(),t,"Clone a "+t)}),equal(jQuery("<input type='checkbox' />").clone()[0].nodeName.toLowerCase(),"input","Clone a <input type='checkbox' />"),equal(jQuery("#nonnodes").contents().clone().length,3,"Check node,textnode,comment clone works (some browsers delete comments on clone)"),e=jQuery("<div><ul><li>test</li></ul></div>").on("click",function(){ok(!0,"Bound event still exists.")}),t=e.clone(!0),e.remove(),e=t.clone(!0),t.remove(),equal(e.length,1,"One element cloned"),equal(e[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),e.trigger("click"),e.remove(),e=jQuery("<div/>").append([document.createElement("table"),document.createElement("table")]),e.find("table").on("click",function(){ok(!0,"Bound event still exists.")}),t=e.clone(!0),equal(t.length,1,"One element cloned"),equal(t[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),t.find("table").trigger("click"),e.remove(),t.remove(),e=jQuery("<div><ul><li>test</li></ul></div>").on("click",function(){ok(!1,"Bound event still exists after .clone().")}),t=e.clone(),t.trigger("click"),t.remove(),e.remove(),e=jQuery("<div/>").html("<embed height='355' width='425' src='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'></embed>"),t=e.clone(!0),equal(t.length,1,"One element cloned"),equal(t.html(),e.html(),"Element contents cloned"),equal(t[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),e=jQuery("<div/>").html("<object height='355' width='425' classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'>  <param name='movie' value='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'>  <param name='wmode' value='transparent'> </object>"),t=e.clone(!0),equal(t.length,1,"One element cloned"),equal(t[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),e=e.find("object"),t=t.find("object"),jQuery.each(["height","width","classid"],function(n,r){equal(t.attr(r),e.attr(r),"<object> attribute cloned: "+r)}),function(){var n={};t.find("param").each(function(e,t){n[t.attributes.name.nodeValue.toLowerCase()]=t.attributes.value.nodeValue.toLowerCase()}),e.find("param").each(function(e,t){var r=t.attributes.name.nodeValue.toLowerCase();equal(n[r],t.attributes.value.nodeValue.toLowerCase(),"<param> cloned: "+r)})}(),e=jQuery("<div/>").html("<object height='355' width='425' type='application/x-shockwave-flash' data='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'>  <param name='movie' value='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'>  <param name='wmode' value='transparent'> </object>"),t=e.clone(!0),equal(t.length,1,"One element cloned"),equal(t.html(),e.html(),"Element contents cloned"),equal(t[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),e=jQuery("<div/>").data({a:!0}),t=e.clone(!0),equal(t.data("a"),!0,"Data cloned."),t.data("a",!1),equal(t.data("a"),!1,"Ensure cloned element data object was correctly modified"),equal(e.data("a"),!0,"Ensure cloned element data object is copied, not referenced"),e.remove(),t.remove(),n=document.createElement("form"),n.action="/test/",e=document.createElement("div"),e.appendChild(document.createTextNode("test")),n.appendChild(e),equal(jQuery(n).clone().children().length,1,"Make sure we just get the form back."),r=jQuery("body").clone(),equal(r.children()[0].id,"qunit","Make sure cloning body works"),r.remove()}),test("clone(script type=non-javascript) (#11359)",function(){expect(3);var e=jQuery("<script type='text/filler'>Lorem ipsum dolor sit amet</script><q><script type='text/filler'>consectetur adipiscing elit</script></q>"),t=e.clone();equal(t[0].text,"Lorem ipsum dolor sit amet","Cloning preserves script text"),equal(t.last().html(),e.last().html(),"Cloning preserves nested script text"),ok(/^\s*<scr.pt\s+type=['"]?text\/filler['"]?\s*>consectetur adipiscing elit<\/scr.pt>\s*$/i.test(t.last().html()),"Cloning preserves nested script text"),t.remove()}),test("clone(form element) (Bug #3879, #6655)",function(){expect(5);var e,t=jQuery("<select><option>Foo</option><option selected>Bar</option></select>");equal(t.clone().find("option:selected").val(),t.find("option:selected").val(),"Selected option cloned correctly"),t=jQuery("<input type='checkbox' value='foo'>").attr("checked","checked"),e=t.clone(),equal(e.is(":checked"),t.is(":checked"),"Checked input cloned correctly"),equal(e[0].defaultValue,"foo","Checked input defaultValue cloned correctly"),t=jQuery("<input type='text' value='foo'>"),e=t.clone(),equal(e[0].defaultValue,"foo","Text input defaultValue cloned correctly"),t=jQuery("<textarea>foo</textarea>"),e=t.clone(),equal(e[0].defaultValue,"foo","Textarea defaultValue cloned correctly")}),test("clone(multiple selected options) (Bug #8129)",function(){expect(1);var e=jQuery("<select><option>Foo</option><option selected>Bar</option><option selected>Baz</option></select>");equal(e.clone().find("option:selected").length,e.find("option:selected").length,"Multiple selected options cloned correctly")}),test("clone() on XML nodes",function(){expect(2);var e=createDashboardXML(),t=jQuery(e.documentElement).clone(),n=jQuery("tab",e).eq(0),r=jQuery("tab",t).eq(0);n.text("origval"),r.text("cloneval"),equal(n.text(),"origval","Check original XML node was correctly set"),equal(r.text(),"cloneval","Check cloned XML node was correctly set")}),test("clone() on local XML nodes with html5 nodename",function(){expect(2);var e=jQuery(jQuery.parseXML("<root><meter /></root>")),t=e.find("meter").clone();equal(t[0].nodeName,"meter","Check if nodeName was not changed due to cloning"),equal(t[0].nodeType,1,"Check if nodeType is not changed due to cloning")}),test("html(undefined)",function(){expect(1),equal(jQuery("#foo").html("<i>test</i>").html(void 0).html().toLowerCase(),"<i>test</i>",".html(undefined) is chainable (#5571)")}),test("html() on empty set",function(){expect(1),strictEqual(jQuery().html(),void 0,".html() returns undefined for empty sets (#11962)")});var childNodeNames=function(e){return jQuery.map(e.childNodes,function(e){return e.nodeName.toUpperCase()}).join(" ")},testHtml=function(e){expect(37);var t,n,r,o=jQuery("<div></div>"),a=jQuery("#qunit-fixture");o.html(e("<div id='parent_1'><div id='child_1'/></div><div id='parent_2'/>")),equal(o.children().length,2,"Found children"),equal(o.children().children().length,1,"Found grandchild"),t=[],n=[],r=jQuery("<map/>").html(e("<area alt='area'/>")).each(function(){n.push("AREA"),t.push(childNodeNames(this))}),equal(n.length,1,"Expecting one parent"),deepEqual(t,n,"Found the inserted area element"),equal(o.html(e(5)).html(),"5","Setting a number as html"),equal(o.html(e(0)).html(),"0","Setting a zero as html"),o.html(e("&#160;&amp;")),equal(o[0].innerHTML.replace(/\xA0/,"&nbsp;"),"&nbsp;&amp;","Entities are passed through correctly"),r="&lt;div&gt;hello1&lt;/div&gt;",equal(o.html(e(r)).html().replace(/>/g,"&gt;"),r,"Escaped html"),r="x"+r,equal(o.html(e(r)).html().replace(/>/g,"&gt;"),r,"Escaped html, leading x"),r=" "+r.slice(1),equal(o.html(e(r)).html().replace(/>/g,"&gt;"),r,"Escaped html, leading space"),t=[],n=[],r={},jQuery("#nonnodes").contents().html(e("<b>bold</b>")).each(function(){var e=jQuery(this).html();r[this.nodeType]=!0,n.push(1===this.nodeType?"<b>bold</b>":void 0),t.push(e?e.toLowerCase():e)}),deepEqual(t,n,"Set containing element, text node, comment"),ok(r[1],"element"),ok(r[3],"text node"),ok(r[8],"comment"),t=[],n=[],a.find("> div").html(e("<b>test</b>")).each(function(){n.push("B"),t.push(childNodeNames(this))}),equal(n.length,7,"Expecting many parents"),deepEqual(t,n,"Correct childNodes after setting HTML"),t=[],n=[],a.html(e("<style>.foobar{color:green;}</style>")).each(function(){n.push("STYLE"),t.push(childNodeNames(this))}),equal(n.length,1,"Expecting one parent"),deepEqual(t,n,"Found the inserted style element"),a.html(e("<select/>")),jQuery("#qunit-fixture select").html(e("<option>O1</option><option selected='selected'>O2</option><option>O3</option>")),equal(jQuery("#qunit-fixture select").val(),"O2","Selected option correct"),r=a.html(e(["<script type='something/else'>ok( false, 'evaluated: non-script' );</script>","<script type='text/javascript'>ok( true, 'evaluated: text/javascript' );</script>","<script type='text/ecmascript'>ok( true, 'evaluated: text/ecmascript' );</script>","<script>ok( true, 'evaluated: no type' );</script>","<div>","<script type='something/else'>ok( false, 'evaluated: inner non-script' );</script>","<script type='text/javascript'>ok( true, 'evaluated: inner text/javascript' );</script>","<script type='text/ecmascript'>ok( true, 'evaluated: inner text/ecmascript' );</script>","<script>ok( true, 'evaluated: inner no type' );</script>","</div>"].join(""))).find("script"),equal(r.length,8,"All script tags remain."),equal(r[0].type,"something/else","Non-evaluated type."),equal(r[1].type,"text/javascript","Evaluated type."),a.html(e("<script type='text/javascript'>ok( true, 'Injection of identical script' );</script>")),a.html(e("<script type='text/javascript'>ok( true, 'Injection of identical script' );</script>")),a.html(e("<script type='text/javascript'>ok( true, 'Injection of identical script' );</script>")),a.html(e("foo <form><script type='text/javascript'>ok( true, 'Injection of identical script (#975)' );</script></form>")),jQuery.scriptorder=0,a.html(e(["<script>","equal( jQuery('#scriptorder').length, 1,'Execute after html' );","equal( jQuery.scriptorder++, 0, 'Script is executed in order' );","</script>","<span id='scriptorder'><script>equal( jQuery.scriptorder++, 1, 'Script (nested) is executed in order');</script></span>","<script>equal( jQuery.scriptorder++, 2, 'Script (unnested) is executed in order' );</script>"].join(""))),QUnit.reset(),a.html(e(a.text())),ok(/^[^<]*[^<\s][^<]*$/.test(a.html()),"Replace html with text")};test("html(String)",function(){testHtml(manipulationBareObj)}),test("html(Function)",function(){testHtml(manipulationFunctionReturningObj)}),test("html(Function) with incoming value",function(){expect(18);var e,t,n,r,o,a,i;e=jQuery("#foo > p"),t=e.map(function(){return jQuery(this).html()}),e.html(function(e,n){return equal(n,t[e],"Make sure the incoming value is correct."),"<b>test</b>"}),n=!0,e.each(function(){1!==this.childNodes.length&&(n=!1)}),ok(n,"Set HTML"),QUnit.reset(),r=jQuery("#nonnodes").contents(),t=r.map(function(){return jQuery(this).html()}),r.html(function(e,n){return equal(n,t[e],"Make sure the incoming value is correct."),"<b>bold</b>"}),2===r.length&&equal(null,null,"Make sure the incoming value is correct."),r.find("b").removeData(),equal(r.html().replace(/ xmlns="[^"]+"/g,"").toLowerCase(),"<b>bold</b>","Check node,textnode,comment with html()"),o=jQuery("<div />"),equal(o.html(function(e,t){return equal(t,"","Make sure the incoming value is correct."),5}).html(),"5","Setting a number as html"),equal(o.html(function(e,t){return equal(t,"5","Make sure the incoming value is correct."),0}).html(),"0","Setting a zero as html"),a=jQuery("<div/>"),i="&lt;div&gt;hello1&lt;/div&gt;",equal(a.html(function(e,t){return equal(t,"","Make sure the incoming value is correct."),i}).html().replace(/>/g,"&gt;"),i,"Verify escaped insertion."),equal(a.html(function(e,t){return equal(t.replace(/>/g,"&gt;"),i,"Make sure the incoming value is correct."),"x"+i}).html().replace(/>/g,"&gt;"),"x"+i,"Verify escaped insertion."),equal(a.html(function(e,t){return equal(t.replace(/>/g,"&gt;"),"x"+i,"Make sure the incoming value is correct.")," "+i}).html().replace(/>/g,"&gt;")," "+i,"Verify escaped insertion.")}),test("clone()/html() don't expose jQuery/Sizzle expandos (#12858)",function(){expect(2);var e=jQuery("<div><b><i>text</i></b></div>").appendTo("#qunit-fixture"),t=/^<b><i>text<\/i><\/b>$/i;e.find(":nth-child(1):lt(4)").data("test",!0),ok(t.test(e.clone(!1)[0].innerHTML),"clone()"),ok(t.test(e.html()),"html()")});var testRemove=function(e){var t=jQuery("#ap").children(":first");t.data("foo","bar"),jQuery("#ap").children()[e](),ok(jQuery("#ap").text().length>10,"Check text is not removed"),equal(jQuery("#ap").children().length,0,"Check remove"),equal(t.data("foo"),"remove"==e?null:"bar","first data"),QUnit.reset(),jQuery("#ap").children()[e]("a"),ok(jQuery("#ap").text().length>10,"Check text is not removed"),equal(jQuery("#ap").children().length,1,"Check filtered remove"),jQuery("#ap").children()[e]("a, code"),equal(jQuery("#ap").children().length,0,"Check multi-filtered remove"),ok(jQuery("#nonnodes").contents().length>=2,"Check node,textnode,comment remove works"),jQuery("#nonnodes").contents()[e](),equal(jQuery("#nonnodes").contents().length,0,"Check node,textnode,comment remove works"),"detach"===e&&t.remove()};test("remove()",8,function(){testRemove("remove")}),test("remove() event cleaning ",1,function(){var e,t,n;e=0,t=jQuery("#ap").children(":first"),n=t.on("click",function(){e++}).remove().appendTo("#qunit-fixture").trigger("click"),strictEqual(0,e,"Event handler has been removed"),n.remove()}),test("detach()",8,function(){testRemove("detach")}),test("detach() event cleaning ",1,function(){var e,t,n;e=0,t=jQuery("#ap").children(":first"),n=t.on("click",function(){e++}).detach().appendTo("#qunit-fixture").trigger("click"),strictEqual(1,e,"Event handler has not been removed"),n.remove()}),test("empty()",function(){expect(6),equal(jQuery("#ap").children().empty().text().length,0,"Check text is removed"),equal(jQuery("#ap").children().length,4,"Check elements are not removed");var e=jQuery("#nonnodes").contents();e.empty(),equal(e.html(),"","Check node,textnode,comment empty works"),notEqual($("#select1").find("option").length,0,"Have some initial options"),$("#select1").empty(),equal($("#select1").find("option").length,0,"No more option elements found"),equal($("#select1")[0].options.length,0,"options.length cleared as well")}),test("jQuery.cleanData",function(){function e(){var e=jQuery("<div class='outer'><div class='inner'></div></div>").on("click",function(){ok(!0,t+" "+n+" Click event fired.")}).on("focus",function(){ok(!0,t+" "+n+" Focus event fired.")}).find("div").on("click",function(){ok(!1,t+" "+n+" Click event fired.")}).on("focus",function(){ok(!1,t+" "+n+" Focus event fired.")}).end().appendTo("body");return e[0].detachEvent=e[0].removeEventListener=function(e){ok(!0,t+" Outer "+e+" event unbound")},e[0].firstChild.detachEvent=e[0].firstChild.removeEventListener=function(e){ok(!0,t+" Inner "+e+" event unbound")},e}expect(14);var t,n,r,o;t="remove",r=e().remove(),n="Outer",r.trigger("click"),n="Inner",r.children().trigger("click"),t="empty",r=e(),o=r.children(),r.empty(),n="Outer",r.trigger("click"),n="Inner",o.trigger("click"),r.remove(),t="html",r=e(),o=r.children(),r.html("<div></div>"),n="Outer",r.trigger("click"),n="Inner",o.trigger("click"),r.remove()}),test("jQuery.buildFragment - no plain-text caching (Bug #6779)",function(){expect(1);var e,t=jQuery("<div />").appendTo("#qunit-fixture"),n=["start-","toString","hasOwnProperty","append","here&there!","-end"];for(e=0;e<n.length;e++)try{t.append(n[e])}catch(r){}equal(t.text(),n.join(""),"Cached strings that match Object properties"),t.remove()}),test("jQuery.html - execute scripts escaped with html comment or CDATA (#9221)",function(){expect(3),jQuery(["<script type='text/javascript'>","<!--","ok( true, '<!-- handled' );","//-->","</script>"].join("\n")).appendTo("#qunit-fixture"),jQuery(["<script type='text/javascript'>","<![CDATA[","ok( true, '<![CDATA[ handled' );","//]]>","</script>"].join("\n")).appendTo("#qunit-fixture"),jQuery(["<script type='text/javascript'>","<!--//--><![CDATA[//><!--","ok( true, '<!--//--><![CDATA[//><!-- (Drupal case) handled' );","//--><!]]>","</script>"].join("\n")).appendTo("#qunit-fixture")}),test("jQuery.buildFragment - plain objects are not a document #8950",function(){expect(1);try{jQuery("<input type='hidden'>",{}),ok(!0,"Does not allow attribute object to be treated like a doc object")}catch(e){}}),test("jQuery.clone - no exceptions for object elements #9587",function(){expect(1);try{jQuery("#no-clone-exception").clone(),ok(!0,"cloned with no exceptions")}catch(e){ok(!1,e.message)}}),test("jQuery(<tag>) & wrap[Inner/All]() handle unknown elems (#10667)",function(){expect(2);var e=jQuery("<div id='wrap-target'>Target</div>").appendTo("#qunit-fixture"),t=jQuery("<section>").appendTo("#qunit-fixture");e.wrapAll("<aside style='background-color:green'></aside>"),notEqual(e.parent("aside").get(0).style.backgroundColor,"transparent","HTML5 elements created with wrapAll inherit styles"),notEqual(t.get(0).style.backgroundColor,"transparent","HTML5 elements create with jQuery( string ) inherit styles")}),test("Cloned, detached HTML5 elems (#10667,10670)",function(){expect(7);var e,t=jQuery("<section>").appendTo("#qunit-fixture");e=t.clone(),e[0].outerHTML&&!jQuery.support.opacity?equal(e[0].outerHTML,"<section></section>","detached clone outerHTML matches '<section></section>'"):equal(e[0].nodeName,"SECTION","detached clone nodeName matches 'SECTION' in modern browsers"),t.bind("click",function(){ok(!0,"clone fired event")}),e=t.clone(!0),e.trigger("click"),e.unbind("click"),t.append("<p>Hello</p>"),e=t.clone(!0),equal(e.find("p").text(),"Hello","Assert text in child of clone"),e.trigger("click"),e.unbind("click"),t.attr({"class":"foo bar baz",title:"This is a title"}),e=t.clone(!0),equal(e.attr("class"),t.attr("class"),"clone and element have same class attribute"),equal(e.attr("title"),t.attr("title"),"clone and element have same title attribute"),t.remove(),t=e.clone(!0),e.remove(),t.trigger("click"),t.unbind("click"),e.unbind("click")}),test("Guard against exceptions when clearing safeChildNodes",function(){expect(1);var e;try{e=jQuery("<div/><hr/><code/><b/>")}catch(t){}ok(e&&e.jquery,"Created nodes safely, guarded against exceptions on safeChildNodes[ -1 ]")}),test("Ensure oldIE creates a new set on appendTo (#8894)",function(){expect(5),strictEqual(jQuery("<div/>").clone().addClass("test").appendTo("<div/>").end().end().hasClass("test"),!1,"Check jQuery.fn.appendTo after jQuery.clone"),strictEqual(jQuery("<div/>").find("p").end().addClass("test").appendTo("<div/>").end().end().hasClass("test"),!1,"Check jQuery.fn.appendTo after jQuery.fn.find"),strictEqual(jQuery("<div/>").text("test").addClass("test").appendTo("<div/>").end().end().hasClass("test"),!1,"Check jQuery.fn.appendTo after jQuery.fn.text"),strictEqual(jQuery("<bdi/>").clone().addClass("test").appendTo("<div/>").end().end().hasClass("test"),!1,"Check jQuery.fn.appendTo after clone html5 element"),strictEqual(jQuery("<p/>").appendTo("<div/>").end().length,jQuery("<p>test</p>").appendTo("<div/>").end().length,"Elements created with createElement and with createDocumentFragment should be treated alike")}),test("html() - script exceptions bubble (#11743)",function(){expect(2),raises(function(){jQuery("#qunit-fixture").html("<script>undefined(); ok( false, 'error not thrown' );</script>"),ok(!1,"error ignored")},"exception bubbled from inline script"),raises(function(){jQuery("#qunit-fixture").html("<script src='data/badcall.js'></script>"),ok(!1,"error ignored")},"exception bubbled from remote script")}),test("checked state is cloned with clone()",function(){expect(2);var e=jQuery.parseHTML("<input type='checkbox' checked='checked'/>")[0];e.checked=!1,equal(jQuery(e).clone().attr("id","clone")[0].checked,!1,"Checked false state correctly cloned"),e=jQuery.parseHTML("<input type='checkbox'/>")[0],e.checked=!0,equal(jQuery(e).clone().attr("id","clone")[0].checked,!0,"Checked true state correctly cloned")}),test("manipulate mixed jQuery and text (#12384, #12346)",function(){expect(2);var e=jQuery("<div>a</div>").append("&nbsp;",jQuery("<span>b</span>"),"&nbsp;",jQuery("<span>c</span>")),t=String.fromCharCode(160);equal(e.text(),"a"+t+"b"+t+"c","Appending mixed jQuery with text nodes"),e=jQuery("<div><div></div></div>").find("div").after("<p>a</p>","<p>b</p>").parent(),equal(e.find("*").length,3,"added 2 paragraphs after inner div")}),testIframeWithCallback("buildFragment works even if document[0] is iframe's window object in IE9/10 (#12266)","manipulation/iframe-denied.html",function(e){expect(1),ok(e.status,e.description)}),test("script evaluation (#11795)",function(){expect(11);var e,t,n=jQuery("#qunit-fixture").empty(),r=function(){return this}(),o=r.ok,a=function(){var e=arguments;return e[0]=!e[0],o.apply(this,e)};r.ok=a,e=jQuery(["<script type='something/else'>ok( false, 'evaluated: non-script' );</script>","<script type='text/javascript'>ok( true, 'evaluated: text/javascript' );</script>","<script type='text/ecmascript'>ok( true, 'evaluated: text/ecmascript' );</script>","<script>ok( true, 'evaluated: no type' );</script>","<div>","<script type='something/else'>ok( false, 'evaluated: inner non-script' );</script>","<script type='text/javascript'>ok( true, 'evaluated: inner text/javascript' );</script>","<script type='text/ecmascript'>ok( true, 'evaluated: inner text/ecmascript' );</script>","<script>ok( true, 'evaluated: inner no type' );</script>","</div>"].join("")),e.appendTo(jQuery("<div class='detached'/>")),r.ok=o,t=n.append(e).find("script"),equal(t[0].type,"something/else","Non-evaluated type."),equal(t[1].type,"text/javascript","Evaluated type."),deepEqual(t.get(),n.find("script").get(),"All script tags remain."),r.ok=a,t=t.add(t.clone()).appendTo(n.find("div")),deepEqual(n.find("div script").get(),t.get(),"Scripts cloned without reevaluation"),n.append(t.detach()),deepEqual(n.find("> script").get(),t.get(),"Scripts detached without reevaluation"),r.ok=o}),test("wrapping scripts (#10470)",function(){expect(2);var e=document.createElement("script");e.text=e.textContent="ok( !document.eval10470, 'script evaluated once' ); document.eval10470 = true;",document.eval10470=!1,jQuery("#qunit-fixture").empty()[0].appendChild(e),jQuery("#qunit-fixture script").wrap("<b></b>"),strictEqual(e.parentNode,jQuery("#qunit-fixture > b")[0],"correctly wrapped"),jQuery(e).remove()}),test("insertAfter, insertBefore, etc do not work when destination is original element. Element is removed (#4087)",function(){expect(10);var e;jQuery.each(["appendTo","prependTo","insertBefore","insertAfter","replaceAll"],function(t,n){e=jQuery(["<ul id='test4087-complex'><li class='test4087'><div>c1</div>h1</li><li><div>c2</div>h2</li></ul>","<div id='test4087-simple'><div class='test4087-1'>1<div class='test4087-2'>2</div><div class='test4087-3'>3</div></div></div>","<div id='test4087-multiple'><div class='test4087-multiple'>1</div><div class='test4087-multiple'>2</div></div>"].join("")).appendTo("#qunit-fixture"),jQuery("#test4087-complex div")[n]("#test4087-complex li:last-child div:last-child"),equal(jQuery("#test4087-complex li:last-child div").length,"replaceAll"===n?1:2,n+" a node to itself, complex case."),jQuery(".test4087-1")[n](".test4087-1"),equal(jQuery(".test4087-1").length,1,n+" a node to itself, simple case."),jQuery("#test4087-complex").remove(),jQuery("#test4087-simple").remove(),jQuery("#test4087-multiple").remove()})}),test("Index for function argument should be received (#13094)",2,function(){var e=0;jQuery("<div/><div/>").before(function(t){equal(t,e++,"Index should be correct")})}),test("Make sure jQuery.fn.remove can work on elements in documentFragment",1,function(){var e=document.createDocumentFragment(),t=e.appendChild(document.createElement("div"));jQuery(t).remove(),equal(e.childNodes.length,0,"div element was removed from documentFragment")});