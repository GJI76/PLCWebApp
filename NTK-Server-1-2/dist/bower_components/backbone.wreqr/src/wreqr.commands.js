Wreqr.Commands=function(t,e){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),t.Handlers.prototype.constructor.apply(this,arguments)},execute:function(t){t=arguments[0];var n=e.rest(arguments);this.hasHandler(t)?this.getHandler(t).apply(this,n):this.storage.addCommand(t,n)},_executeCommands:function(t,n,s){var a=this.storage.getCommands(t);e.each(a.instances,function(t){n.apply(s,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var n,s=t.storageType||this.storageType;n=e.isFunction(s)?new s:s,this.storage=n}})}(Wreqr,_);