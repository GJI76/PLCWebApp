define(["backbone","communicator","routers/Main","modules/Patcher","modules/ToolBar"],function(o,t,e,n,a){var r=new o.Marionette.Application;window.app=r,r.addRegions({patcherRegion:"#patcherRegion",toolBarRegion:"#toolBarRegion"}),r.addInitializer(function(){t.mediator.trigger("APP:START"),r.mainRouter=new e,o.history.start(),r.module("Patcher",n),r.module("ToolBar",a)});var i;return $.getJSON("package.json",function(o){i=o.version.split("."),$.getJSON("https://raw.githubusercontent.com/netlabtoolkit/ntk/master/package.json",function(t){for(var e=t.version.split("."),n=!1,a=!0,r=0;3>r&&!n;)parseInt(e[r],10)>parseInt(i[r],10)?(n=!0,a=!1):parseInt(e[r],10)!==parseInt(i[r],10)&&(n=!0,a=!0),r++;$("#toolBarRegion .settings").append(a?'<div class="version">v'+o.version+"</div>":'<div class="version"><a href="http://www.netlabtoolkit.org/download/" TARGET="_BLANK">UPDATE AVAILABLE</a></div>')})}),r});