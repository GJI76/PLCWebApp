define(["backbone","rivets","views/item/WidgetMulti","text!./template.js"],function(t,e,s,i){return s.extend({typeID:"HTML",categories:["UI"],className:"htmlWidget",template:_.template(i),sources:[],widgetEvents:{"mouseup .detachedEl":"imgMoved"},initialize:function(t){s.prototype.initialize.call(this,t),this.model.set({ins:[{title:"in",to:"in"},{title:"X Position",to:"left"},{title:"Y Position",to:"top"},{title:"opacity",to:"opacity"}],title:"HTML",activeControlParameter:"left",controlParameters:[{name:"X",parameter:"left"},{name:"Y",parameter:"top"},{name:"opacity",parameter:"opacity"}],appendText:!1,left:250,top:200,opacity:100,userHtml:"<div>\n   <div class='elementa'>temp</div>\n   <div class='elementb'>humidity</div>\n</div>",userCss:".elementa {background-color: lightgray; width: 60px;}\n.elementb {background-color: #a3a3a3; width: 60px;}",displayClass:"displayhtml",displayClassLast:"displayhtml",inputElementClass:"elementa",inputProperty:"width"}),this.domReady=!1,this.lastIn=-1},onRender:function(){s.prototype.onRender.call(this),app.server||(this.$(".detachedEl").css("cursor","move"),this.$(".detachedEl").css("position","fixed"),this.$(".detachedEl").draggable({cursor:"move"}),this.textDiv=this.$(".displaytext"),this.domReady=!0)},onModelChange:function(t){if(!app.server){if(void 0!==t.changedAttributes().in&&t.changedAttributes().in!=this.lastIn){var e="."+this.model.get("inputElementClass"),s=this.model.get("in");switch(this.model.get("inputProperty")){case"width":this.$(e).css("width",s+"px");break;case"height":this.$(e).css("height",s+"px");break;case"scale":this.$(e).css("width",s+"px"),this.$(e).css("height",s+"px");break;case"bgcolor":this.$(e).css("background-color",s);break;case"text":this.$(e).text(s);break;case"html":this.$(e).html(s)}}if(this.lastIn=t.changedAttributes().in,void 0!==t.changedAttributes().displayClass&&this.domReady){var i=this.model.get("displayClassLast"),a=this.model.get("displayClass");this.textDiv.removeClass(i).addClass(a),this.model.set("displayClassLast",a)}}},imgMoved:function(){var t=this.$(".detachedEl").offset();this.model.set("left",t.left),this.model.set("top",t.top)}})});