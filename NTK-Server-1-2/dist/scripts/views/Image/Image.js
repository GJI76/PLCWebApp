define(["backbone","rivets","views/item/WidgetMulti","text!./template.js"],function(e,t,i,o){return i.extend({typeID:"Image",categories:["media"],className:"image",template:_.template(o),sources:[],widgetEvents:{"mouseup .detachedEl":"imgMoved"},initialize:function(e){i.prototype.initialize.call(this,e),this.model.set({src:"assets/images/NTKlogogreen.jpg",ins:[{title:"X Position",to:"left"},{title:"Y Position",to:"top"},{title:"opacity",to:"opacity"}],title:"Image",activeControlParameter:"left",controlParameters:[{name:"X",parameter:"left"},{name:"Y",parameter:"top"},{name:"opacity",parameter:"opacity"}],left:100,top:200,opacity:100})},onRender:function(){i.prototype.onRender.call(this);app.server||(this.$(".detachedEl").css("cursor","move"),this.$(".detachedEl").css("position","fixed"),this.$(".detachedEl").draggable({cursor:"move"}))},imgMoved:function(){var e=this.$(".detachedEl").offset();this.model.set("left",e.left),this.model.set("top",e.top),this.sendToFront()},sendToFront:function(){var e=0;$(".widget").each(function(){e=Math.max(parseInt($(this).zIndex()),e)}),this.$el.zIndex(e+1)}})});