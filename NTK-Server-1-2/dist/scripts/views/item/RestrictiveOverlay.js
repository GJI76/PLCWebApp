define(["backbone","text!tmpl/RestrictiveOverlay_tmpl.js"],function(e,t){return e.View.extend({events:{mousedown:"showMessage"},subViews:[],template:_.template(t),className:"restrictiveOverlay",initialize:function(){this.addEventListeners()},render:function(){return this.el.innerHTML=this.template(),this},addEventListeners:function(){window.app.on("RestrictiveOverlay:hide",this.hide,this),window.app.on("RestrictiveOverlay:show",this.show,this),window.app.on("RestrictiveOverlay:showMessage",this.showMessage,this)},show:function(){this.setTopZIndex(),this.$el.show()},hide:function(){this.$el.hide()},showMessage:function(e){e.stopPropagation(),e.preventDefault(),this.$(".message").css({top:e.pageY-20,left:e.pageX+20}).animate({opacity:1},{duration:500,complete:function(){$(this).animate({opacity:0},500)}})},setTopZIndex:function(){var e=0;$(".widget").each(function(){var t=parseInt($(this).css("z-index"),10);t>e&&(e=t)}),this.$el.css("z-index",e),$("#toolBarRegion").css("z-index",e+10)}})});