define(["backbone","rivets","views/item/WidgetMulti","text!./template.js","utils/SignalChainFunctions","utils/SignalChainClasses","jqueryknob"],function(t,e,o,i){return o.extend({ins:[{title:"in",to:"in"}],outs:[{title:"out",from:"outA",to:"out1"},{title:"out",from:"outB",to:"out2"},{title:"out",from:"outC",to:"out3"},{title:"out",from:"outD",to:"out4"}],widgetEvents:{},typeID:"Splitter",className:"splitter",categories:["logic"],template:_.template(i),initialize:function(t){o.prototype.initialize.call(this,t),this.model.set({title:"Splitter",outACenter:200,outBCenter:400,outCCenter:600,outDCenter:800,out1:0,out2:0,out3:0,out4:0,outWidth:150,outMin:0,outMax:1023})},onRender:function(){o.prototype.onRender.call(this)},onModelChange:function(t){if(t.changedAttributes().in||t.changedAttributes().outWidth||t.changedAttributes().outMin||t.changedAttributes().outMax){var e=this.model.get("in"),o=parseInt(this.model.get("outWidth"),10),i=parseInt(this.model.get("outMin"),10),n=parseInt(this.model.get("outMax"),10);this.model.set("outA",this.envelope(e,this.model.get("outACenter"),o,i,n)),this.model.set("outB",this.envelope(e,this.model.get("outBCenter"),o,i,n)),this.model.set("outC",this.envelope(e,this.model.get("outCCenter"),o,i,n)),this.model.set("outD",this.envelope(e,this.model.get("outDCenter"),o,i,n))}},envelope:function(t,e,o,i,n){t=parseInt(t,10),e=parseInt(e,10);var u=i,s=e-o/2,l=e+o/2,r=s+o/3,a=r+o/3,h=n-i,d=h/(r-s),m=h/(l-a);return u=t>=s&&l>=t?t>=r&&a>=t?n:r>t?(t-s)*d+i:n-(t-a)*m:i,parseInt(u,10)}})});